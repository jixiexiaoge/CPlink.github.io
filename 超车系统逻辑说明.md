# è¶…è½¦ç³»ç»Ÿé€»è¾‘è¯´æ˜æ–‡æ¡£

## ğŸ“‹ ç›®å½•
1. [ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
2. [æ•°æ®æµåˆ†æ](#æ•°æ®æµåˆ†æ)
3. [è¶…è½¦å†³ç­–é€»è¾‘](#è¶…è½¦å†³ç­–é€»è¾‘)
4. [å…³é”®ç®—æ³•åŸç†](#å…³é”®ç®—æ³•åŸç†)
5. [é…ç½®å‚æ•°è¯´æ˜](#é…ç½®å‚æ•°è¯´æ˜)
6. [çŠ¶æ€æœºåˆ†æ](#çŠ¶æ€æœºåˆ†æ)
7. [å®‰å…¨æœºåˆ¶](#å®‰å…¨æœºåˆ¶)
8. [UIå±•ç¤ºåˆ†æ](#UIå±•ç¤ºåˆ†æ)
9. [æ€»ç»“](#æ€»ç»“)

---

## ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

### ä¸‰å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UIå±•ç¤ºå±‚ (VehicleLaneVisualization)        â”‚
â”‚  - å®æ—¶æ˜¾ç¤ºè½¦è¾†å’Œè½¦é“æ•°æ®                                         â”‚
â”‚  - è¶…è½¦æ¡ä»¶æ£€æŸ¥è¡¨æ ¼ (4ç»„æ ¸å¿ƒæ£€æŸ¥ï¼Œå…±11é¡¹ç»†åˆ†)                        â”‚
â”‚  - è¿æ¥çŠ¶æ€æ˜¾ç¤º (å¾…æœº/å‡†å¤‡/æ­£å¸¸/å»¶è¿Ÿ/å¼‚å¸¸/æ–­å¼€)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å†³ç­–å±‚ (AutoOvertakeManager)                 â”‚
â”‚  - è¶…è½¦æ¡ä»¶åˆ¤æ–­ (å‰ç½®æ¡ä»¶ + è¶…è½¦åˆ¤æ–­ + å¯è¡Œæ€§æ£€æŸ¥)                  â”‚
â”‚  - è¶…è½¦æ–¹å‘é€‰æ‹© (ä¼˜å…ˆå·¦ä¾§ï¼Œç¬¦åˆä¸­å›½äº¤é€šè§„åˆ™)                        â”‚
â”‚  - å˜é“å‘½ä»¤å‘é€                                                 â”‚
â”‚  - è¿”å›åŸè½¦é“ç­–ç•¥                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å±‚ (XiaogeDataReceiver)                 â”‚
â”‚  - TCPè¿æ¥ç®¡ç† (7711ç«¯å£)                                      â”‚
â”‚  - æ•°æ®æ¥æ”¶å’Œè§£æ (JSONæ ¼å¼)                                    â”‚
â”‚  - å¿ƒè·³åŒ…æœºåˆ¶ (5ç§’é—´éš”)                                         â”‚
â”‚  - è‡ªåŠ¨é‡è¿æœºåˆ¶                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ•°æ®æµåˆ†æ

### 1. æ•°æ®æºï¼šopenpilot (comma3)

**å‘é€é¢‘ç‡**ï¼š20Hz (æ¯50msä¸€æ¬¡)

**æ•°æ®åŒ…ç»“æ„**ï¼š
```
TCPæ•°æ®åŒ…æ ¼å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4å­—èŠ‚é•¿åº¦  â”‚  JSONæ•°æ®                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**JSONæ•°æ®ç»“æ„**ï¼š
```json
{
  "sequence": 12345,           // æ•°æ®åŒ…åºå·
  "timestamp": 1700000000.123, // Pythonç«¯æ—¶é—´æˆ³
  "ip": "192.168.0.4",        // è®¾å¤‡IP
  "data": {
    "carState": {
      "vEgo": 25.0,                    // æœ¬è½¦é€Ÿåº¦ (m/s)
      "steeringAngleDeg": 5.2,         // æ–¹å‘ç›˜è§’åº¦ (åº¦)
      "leftLatDist": 0.5,              // åˆ°å·¦è½¦é“çº¿è·ç¦» (m)
      "leftBlindspot": false,          // å·¦ç›²åŒº
      "rightBlindspot": false          // å³ç›²åŒº
    },
    "modelV2": {
      "lead0": {                       // å‰è½¦
        "x": 45.0,                     // è·ç¦» (m)
        "y": 0.2,                      // æ¨ªå‘ä½ç½® (m)
        "v": 20.0,                     // é€Ÿåº¦ (m/s)
        "prob": 0.95                   // ç½®ä¿¡åº¦
      },
      "leadLeft": {                    // å·¦ä¾§è½¦è¾†
        "dRel": 30.0,
        "vRel": 2.0,
        "status": true
      },
      "leadRight": {                   // å³ä¾§è½¦è¾†
        "dRel": 50.0,
        "vRel": -1.0,
        "status": false
      },
      "laneLineProbs": [0.85, 0.90],  // [å·¦è½¦é“çº¿, å³è½¦é“çº¿] ç½®ä¿¡åº¦
      "meta": {
        "laneWidthLeft": 3.5,          // å·¦è½¦é“å®½åº¦ (m)
        "laneWidthRight": 3.5,         // å³è½¦é“å®½åº¦ (m)
        "laneChangeState": 0,          // å˜é“çŠ¶æ€ (0=æœªå˜é“, 1=å˜é“ä¸­, 2=å®Œæˆ, 3=å–æ¶ˆ)
        "laneChangeDirection": 0       // å˜é“æ–¹å‘ (0=æ— , 1=å·¦, 2=å³)
      },
      "curvature": {
        "maxOrientationRate": 0.008    // æ›²ç‡ (rad/s)
      }
    },
    "systemState": {
      "enabled": true,                 // openpilotå·²å¯ç”¨
      "active": true                   // openpilotå·²æ¿€æ´» (ACCå·¥ä½œ)
    }
  }
}
```

### 2. æ•°æ®æ¥æ”¶æµç¨‹ (XiaogeDataReceiver.kt)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. TCPè¿æ¥å»ºç«‹ (connectToServer)                            â”‚
â”‚     - è¿æ¥åˆ° 192.168.0.4:7711                                â”‚
â”‚     - è®¾ç½®30ç§’è¶…æ—¶                                            â”‚
â”‚     - ç¦ç”¨Nagleç®—æ³• (é™ä½å»¶è¿Ÿ)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. å¯åŠ¨å¿ƒè·³ä»»åŠ¡ (startHeartbeatTask)                         â”‚
â”‚     - æ¯5ç§’å‘é€å¿ƒè·³åŒ… (CMD 2)                                 â”‚
â”‚     - ä¿æŒè¿æ¥æ´»è·ƒ                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. æ•°æ®æ¥æ”¶å¾ªç¯ (startListener)                              â”‚
â”‚     a. è¯»å–4å­—èŠ‚é•¿åº¦                                          â”‚
â”‚     b. è¯»å–å®Œæ•´JSONæ•°æ®                                       â”‚
â”‚     c. è§£æJSON (parseJsonData)                              â”‚
â”‚     d. å›è°ƒ onDataReceived                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. è‡ªåŠ¨æ¸…ç†ä»»åŠ¡ (startCleanupTask)                           â”‚
â”‚     - æ¯1ç§’æ£€æŸ¥ä¸€æ¬¡                                           â”‚
â”‚     - è¶…è¿‡4ç§’æœªæ”¶åˆ°æ•°æ® â†’ æ¸…ç†                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¼‚å¸¸å¤„ç†æœºåˆ¶**ï¼š
- **SocketTimeoutException**ï¼šè¿æ¥æ­£å¸¸ä½†æ— æ•°æ®ï¼Œç»§ç»­ç­‰å¾…
- **SocketException**ï¼šSocketé”™è¯¯ï¼Œ2ç§’åé‡è¿
- **IOException**ï¼šè¿æ¥æ–­å¼€ï¼Œ2ç§’åé‡è¿
- **è¿ç»­å¤±è´¥**ï¼šè¿ç»­3æ¬¡è§£æå¤±è´¥ï¼Œé‡æ–°è¿æ¥ï¼ˆæ•°æ®åŒ…è¾¹ç•Œå¯èƒ½é”™ä½ï¼‰

### 3. æ•°æ®æ›´æ–°æµç¨‹ (MainActivityLifecycle.kt)

```kotlin
// æ•°æ®æ¥æ”¶å›è°ƒ
core.xiaogeDataReceiver = XiaogeDataReceiver(
    context = activity,
    onDataReceived = { data ->
        // 1. æ›´æ–°è¶…è½¦ç®¡ç†å™¨å¹¶è·å–è¶…è½¦çŠ¶æ€
        val overtakeStatus = core.autoOvertakeManager.update(data)
        
        // 2. æ›´æ–°æ•°æ®ï¼ŒåŒ…å«è¶…è½¦çŠ¶æ€
        core.xiaogeData.value = data?.copy(overtakeStatus = overtakeStatus)
    },
    onDeviceIPDetected = { deviceIP -> ... }
)
```

**æ•°æ®æµå‘**ï¼š
```
openpilot â†’ XiaogeDataReceiver â†’ AutoOvertakeManager â†’ core.xiaogeData â†’ UI
           (TCPæ¥æ”¶)              (è¶…è½¦å†³ç­–)            (Stateæ›´æ–°)    (è‡ªåŠ¨é‡ç»„)
```

---

## è¶…è½¦å†³ç­–é€»è¾‘

### å†³ç­–æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å¼€å§‹è¶…è½¦å†³ç­–                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. æ£€æŸ¥è¶…è½¦æ¨¡å¼ (getOvertakeMode)                            â”‚
â”‚     - æ¨¡å¼0ï¼šç¦æ­¢è¶…è½¦ â†’ è¿”å›                                   â”‚
â”‚     - æ¨¡å¼1ï¼šæ‹¨æ†è¶…è½¦ â†’ ä»…æ’­æ”¾ç¡®è®¤éŸ³                           â”‚
â”‚     - æ¨¡å¼2ï¼šè‡ªåŠ¨è¶…è½¦ â†’ ç»§ç»­åˆ¤æ–­                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æ£€æŸ¥å˜é“çŠ¶æ€ (laneChangeState)                            â”‚
â”‚     - æ­£åœ¨å˜é“ä¸­ (!=0) â†’ ç­‰å¾…å®Œæˆ                             â”‚
â”‚     - æœªå˜é“ (==0) â†’ ç»§ç»­åˆ¤æ–­                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. æ£€æŸ¥è¿”å›åŸè½¦é“æ¡ä»¶ (checkReturnConditions)                â”‚
â”‚     - å·²å®Œå…¨è¶…è¶Š && è¿”å›æ•ˆç‡é«˜ && è¿”å›å®‰å…¨ â†’ å‘é€è¿”å›å‘½ä»¤      â”‚
â”‚     - ä¸æ»¡è¶³ â†’ ç»§ç»­è¶…è½¦åˆ¤æ–­                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æ£€æŸ¥å‰ç½®æ¡ä»¶ (checkPrerequisites) - 8é¡¹å¿…è¦æ¡ä»¶           â”‚
â”‚     â‘  é“è·¯ç±»å‹ï¼šé«˜é€Ÿå…¬è·¯(0)æˆ–å¿«é€Ÿè·¯(6)æ‰å…è®¸                   â”‚
â”‚     â‘¡ è½¬å¼¯è·ç¦»ï¼šTBTè·ç¦» > 2000m (é¿å…æ¥è¿‘åŒé“)                 â”‚
â”‚     â‘¢ å˜é“çŠ¶æ€ï¼šå½“å‰æœªåœ¨å˜é“ä¸­ (laneChangeState == 0)         â”‚
â”‚     â‘£ å‰è½¦å­˜åœ¨ï¼šè·ç¦» < 80mï¼Œä¸”ç½®ä¿¡åº¦ â‰¥ 50%                     â”‚
â”‚     â‘¤ æœ¬è½¦é€Ÿåº¦ï¼šâ‰¥ 60 km/h (å¯é…ç½®: 40-100)                    â”‚
â”‚     â‘¥ å‰è½¦é€Ÿåº¦ï¼šâ‰¥ 50 km/h (é¿å…æ‹¥å µè·¯æ®µè¯¯è§¦å‘)                 â”‚
â”‚     â‘¦ é“è·¯æ›²ç‡ï¼š< 0.02 rad/s (ç¡®ä¿åœ¨ç›´é“æˆ–ç¼“å¼¯)                â”‚
â”‚     â‘§ æ–¹å‘ç›˜è§’åº¦ï¼šâ‰¤ 15Â° (ç¡®ä¿è½¦è¾†å§¿æ€ç¨³å®š)                    â”‚
â”‚                                                              â”‚
â”‚     ä¸æ»¡è¶³ â†’ è¿”å› "ç›‘æ§ä¸­" + é˜»æ­¢åŸå›                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æ£€æŸ¥è¶…è½¦åˆ¤æ–­ (shouldOvertake)                             â”‚
â”‚                                                              â”‚
â”‚     æ–¹æ¡ˆAï¼šè¿œè·ç¦»è¶…è½¦ (ä¼˜å…ˆ)                                   â”‚
â”‚     - å‰è½¦é€Ÿåº¦ â‰¥ 50 km/h                                     â”‚
â”‚     - å‰è½¦é€Ÿåº¦ â‰¤ 80% æœ¬è½¦é€Ÿåº¦                                 â”‚
â”‚     - é€Ÿåº¦å·® â‰¥ 20 km/h                                       â”‚
â”‚     - è·ç¦»åœ¨ 30-100m                                         â”‚
â”‚                                                              â”‚
â”‚     æ–¹æ¡ˆBï¼šæ ‡å‡†è¶…è½¦                                           â”‚
â”‚     - é€Ÿåº¦å·® â‰¥ 10 km/h (å¯é…ç½®: 5-30)                        â”‚
â”‚                                                              â”‚
â”‚     ä¸æ»¡è¶³ â†’ è¿”å› "ç›‘æ§ä¸­" + é˜»æ­¢åŸå›                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. é˜²æŠ–æœºåˆ¶ (debounceCounter)                               â”‚
â”‚     - è¿ç»­3å¸§æ»¡è¶³æ¡ä»¶æ‰ç¡®è®¤è¶…è½¦                                 â”‚
â”‚     - é˜²æ­¢ç¬æ—¶æ•°æ®æ³¢åŠ¨å¯¼è‡´è¯¯åˆ¤                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7. è¶…è½¦å¯è¡Œæ€§æ£€æŸ¥ (checkOvertakeConditions)                  â”‚
â”‚                                                              â”‚
â”‚     å·¦è¶…è½¦å¯è¡Œæ€§ (checkLeftOvertakeFeasibility):              â”‚
â”‚     â‘  å·¦ä¾§è½¦é“æ— è½¦ (leadLeft.status == false)                 â”‚
â”‚     â‘¡ å·¦è½¦é“çº¿ç½®ä¿¡åº¦ â‰¥ 70% (å¯é…ç½®ï¼ŒUIé»˜è®¤0.7)                 â”‚
â”‚     â‘¢ å·¦è½¦é“å®½åº¦ â‰¥ 3.0m (å¯é…ç½®ï¼ŒUIé»˜è®¤3.0)                   â”‚
â”‚     â‘£ å·¦ç›²åŒºæ— è½¦ (leftBlindspot == false)                    â”‚
â”‚                                                              â”‚
â”‚     å³è¶…è½¦å¯è¡Œæ€§ (checkRightOvertakeFeasibility):             â”‚
â”‚     â‘  å³ä¾§è½¦é“æ— è½¦ (leadRight.status == false)                â”‚
â”‚     â‘¡ å³è½¦é“çº¿ç½®ä¿¡åº¦ â‰¥ 70% (å¯é…ç½®ï¼ŒUIé»˜è®¤0.7)                 â”‚
â”‚     â‘¢ å³è½¦é“å®½åº¦ â‰¥ 3.0m (å¯é…ç½®ï¼ŒUIé»˜è®¤3.0)                   â”‚
â”‚     â‘£ å³ç›²åŒºæ— è½¦ (rightBlindspot == false)                   â”‚
â”‚                                                              â”‚
â”‚     æ–¹å‘é€‰æ‹©ï¼šä¼˜å…ˆå·¦è¶…è½¦ (ç¬¦åˆä¸­å›½äº¤é€šè§„åˆ™)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  8. å»¶è¿Ÿæ‰§è¡Œä¸å˜é“å‘½ä»¤ (handleOvertakeDecision)               â”‚
â”‚     - è‡ªåŠ¨è¶…è½¦æ¨¡å¼ï¼šæ’­æ”¾æç¤ºéŸ³ -> å»¶è¿Ÿ2.5ç§’ -> å‘é€å‘½ä»¤          â”‚
â”‚     - æ‹¨æ†è¶…è½¦æ¨¡å¼ï¼šæ£€æŸ¥å†·å´ -> æ’­æ”¾ç¡®è®¤éŸ³ -> ç­‰å¾…æ‰‹åŠ¨æ‹¨æ†       â”‚
â”‚     - è¶…è½¦æ“ä½œå†·å´ï¼šæ“ä½œåè¿›å…¥20ç§’å†·å´æœŸ (é˜²æ­¢é¢‘ç¹å˜é“)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¶…è½¦å†³ç­–ä»£ç æµç¨‹

```kotlin
// AutoOvertakeManager.kt - update()
fun update(data: XiaogeVehicleData?, roadType: Int?): OvertakeStatusData? {
    if (data == null) return null
    
    // 1. æ£€æŸ¥è¶…è½¦æ¨¡å¼
    val overtakeMode = config.getOvertakeMode()
    if (overtakeMode == 0) return handleOvertakeModeDisabled(data)
    
    // 2. æ£€æŸ¥å¾…æ‰§è¡Œå˜é“ (å»¶è¿Ÿ2.5ç§’æ‰§è¡Œæœºåˆ¶)
    checkPendingLaneChange(data, overtakeMode, roadType)?.let { return it }
    
    // 3. æ£€æŸ¥å˜é“çŠ¶æ€
    val laneChangeState = data.modelV2?.meta?.laneChangeState ?: 0
    if (laneChangeState != 0) {
        return handleLaneChangeInProgress(data, laneChangeState)
    }
    
    // 4. å˜é“å®Œæˆå¤„ç† (æ¸…ç†çŠ¶æ€)
    handleLaneChangeCompleted()
    
    // 5. æ£€æŸ¥è¿”å›åŸè½¦é“æ¡ä»¶ (æ–¹æ¡ˆ5)
    checkReturnToOriginalLane(data, overtakeMode)?.let { return it }
    
    // 6. è¯„ä¼°è¶…è½¦æ¡ä»¶å¹¶æ‰§è¡Œå†³ç­– (å‰ç½®æ¡ä»¶ + è¶…è½¦åˆ¤æ–­ + é˜²æŠ– + å¯è¡Œæ€§)
    return evaluateOvertakeConditions(data, overtakeMode, roadType)
}

// evaluateOvertakeConditions å†…éƒ¨é€»è¾‘
private fun evaluateOvertakeConditions(...): OvertakeStatusData {
    // 1. æ£€æŸ¥20ç§’å†·å´æ—¶é—´ (é¿å…é¢‘ç¹æ“ä½œ)
    if (isInCooldown()) return createCooldownStatus()
    
    // 2. æ£€æŸ¥8é¡¹å‰ç½®æ¡ä»¶ (é“è·¯ã€é€Ÿåº¦ã€å‰è½¦ã€æ›²ç‡ç­‰)
    checkPrerequisites(data, roadType).takeIf { it is Fail }?.let { return ... }
    
    // 3. æ£€æŸ¥æ˜¯å¦éœ€è¦è¶…è½¦ (æ–¹æ¡ˆ3è¿œè·ç¦» æˆ– æ ‡å‡†é€Ÿåº¦å·®è¶…è½¦)
    shouldOvertake(data).takeIf { it is Fail }?.let { return ... }
    
    // 4. 3å¸§é˜²æŠ– (ç¡®è®¤æ¡ä»¶ç¨³å®š)
    if (++debounceCounter < 3) return createOvertakeStatus(data, "ç›‘æ§ä¸­", true, null)
    
    // 5. è¯„ä¼°è¶…è½¦æ–¹å‘å¹¶æ‰§è¡Œå†³ç­– (å·¦ä¾§ä¼˜å…ˆ)
    val decision = checkOvertakeConditions(data)
    if (decision != null) {
        return handleOvertakeDecision(data, decision, overtakeMode)
    } else {
        // é‡ç½®é˜²æŠ–è®¡æ•°å¹¶ç”Ÿæˆé˜»æ­¢åŸå› 
        debounceCounter = 0
        return createOvertakeStatus(data, "ç›‘æ§ä¸­", false, null, blockingReason = ...)
    }
}
```

---

## å…³é”®ç®—æ³•åŸç†

### 1. è¿œè·ç¦»è¶…è½¦ç®—æ³• (æ–¹æ¡ˆ3)

**è®¾è®¡ç›®æ ‡**ï¼šæå‰è¶…è½¦ï¼Œæé«˜é€šè¡Œæ•ˆç‡

**è§¦å‘æ¡ä»¶**ï¼š
```kotlin
// æ¡ä»¶1ï¼šå‰è½¦æœ€ä½é€Ÿåº¦ â‰¥ 50 km/h (é¿å…å µè½¦)
leadSpeedKmh >= 50.0f

// æ¡ä»¶2ï¼šå‰è½¦é€Ÿåº¦ â‰¤ 80% æœ¬è½¦é€Ÿåº¦
speedRatio = leadSpeedKmh / vEgoKmh <= 0.8

// æ¡ä»¶3ï¼šé€Ÿåº¦å·® â‰¥ 20 km/h
speedDiff = vEgoKmh - leadSpeedKmh >= 20.0

// æ¡ä»¶4ï¼šè·ç¦»åœ¨ 30-100m
30.0 <= leadDistance <= 100.0
```

**åº”ç”¨åœºæ™¯**ï¼š
- é«˜é€Ÿå…¬è·¯ä¸Šï¼Œæœ¬è½¦120 km/hï¼Œå‰è½¦80 km/hï¼Œè·ç¦»50m
- é€Ÿåº¦æ¯”ï¼š80/120 = 0.67 < 0.8 âœ“
- é€Ÿåº¦å·®ï¼š120-80 = 40 km/h > 20 âœ“
- è·ç¦»ï¼š50m âˆˆ [30, 100] âœ“
- **ç»“æœ**ï¼šè§¦å‘è¿œè·ç¦»è¶…è½¦ï¼Œæå‰å˜é“

**ä¼˜åŠ¿**ï¼š
- é¿å…æ¥è¿‘å‰è½¦æ‰è¶…è½¦ï¼Œæé«˜å®‰å…¨æ€§
- å‡å°‘æ€¥åˆ¹è½¦å’Œæ€¥åŠ é€Ÿï¼Œæå‡èˆ’é€‚æ€§
- æé«˜é€šè¡Œæ•ˆç‡

### 2. è¿”å›åŸè½¦é“ç®—æ³• (æ–¹æ¡ˆ5)

**è®¾è®¡ç›®æ ‡**ï¼šè¶…è½¦åè‡ªåŠ¨è¿”å›åŸè½¦é“ï¼Œä¿æŒè½¦é“çºªå¾‹

**æ ¸å¿ƒå˜é‡**ï¼š
```kotlin
originalLanePosition: Float  // åŸå§‹è½¦é“ä½ç½®ï¼ˆæ¨ªå‘è·ç¦»ï¼‰
netLaneChanges: Int          // å‡€å˜é“æ•°ï¼š>0åœ¨å·¦ä¾§ï¼Œ<0åœ¨å³ä¾§
laneMemoryStartTime: Long    // è®°å¿†å¼€å§‹æ—¶é—´
overtakeCompleteTimer: Long  // è¶…è¶Šå®Œæˆè®¡æ—¶å™¨
```

**åˆ¤æ–­æµç¨‹**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è¶…è½¦å¼€å§‹è®°å½• (recordOvertakeStart)                        â”‚
â”‚     - è®°å½•åŸè½¦é“ä½ç½® (leftLatDist)                            â”‚
â”‚     - æ›´æ–°å‡€å˜é“æ•° (LEFT: +1, RIGHT: -1)                      â”‚
â”‚     - è®°å½•å¼€å§‹æ—¶é—´                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. æ£€æŸ¥è¿”å›æ¡ä»¶ (checkReturnConditions)                      â”‚
â”‚                                                              â”‚
â”‚     å‰ææ¡ä»¶ï¼š                                                â”‚
â”‚     - originalLanePosition != 0                             â”‚
â”‚     - netLaneChanges != 0                                   â”‚
â”‚     - æœªè¶…è¿‡30ç§’è¶…æ—¶                                          â”‚
â”‚                                                              â”‚
â”‚     å¿…è¦æ¡ä»¶ï¼š                                                â”‚
â”‚     a. å®Œå…¨è¶…è¶Š (hasCompletelyOvertaken)                      â”‚
â”‚        - åŸè½¦é“å‰è½¦ä¸åœ¨å‰æ–¹20må†…                               â”‚
â”‚        - ç›®æ ‡ä¾§è½¦è¾†è·ç¦» > 50m æˆ–æ— è½¦                           â”‚
â”‚        - ç­‰å¾…2ç§’ç¡®è®¤                                          â”‚
â”‚                                                              â”‚
â”‚     b. è¿”å›æ•ˆç‡é«˜ (isReturnEfficient)                         â”‚
â”‚        - ç›®æ ‡è½¦é“é€Ÿåº¦ä¼˜åŠ¿ â‰¥ 8 km/h                            â”‚
â”‚                                                              â”‚
â”‚     c. è¿”å›å®‰å…¨ (isReturnSafe)                                â”‚
â”‚        - ç›®æ ‡ä¾§ç›²åŒºæ— è½¦                                        â”‚
â”‚        - ç›®æ ‡ä¾§è½¦è¾†è·ç¦»å®‰å…¨ (> 30m æˆ– > 0.4å€æœ¬è½¦é€Ÿåº¦)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. å‘é€è¿”å›å‘½ä»¤                                              â”‚
â”‚     - å‡€å˜é“æ•° > 0ï¼šå‘å³è¿”å›                                   â”‚
â”‚     - å‡€å˜é“æ•° < 0ï¼šå‘å·¦è¿”å›                                   â”‚
â”‚     - é‡ç½®è½¦é“è®°å¿†                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å®Œå…¨è¶…è¶Šåˆ¤æ–­ (hasCompletelyOvertaken)**ï¼š
```kotlin
// æ£€æŸ¥åŸè½¦é“å‰è½¦æ˜¯å¦åœ¨åæ–¹
val lead0 = data.modelV2?.lead0
if (lead0 != null && lead0.prob > 0.5f) {
    // åˆ¤æ–­å‰è½¦æ˜¯å¦åœ¨åŸè½¦é“ï¼ˆé€šè¿‡æ¨ªå‘ä½ç½®ï¼‰
    val targetY = if (netLaneChanges > 0) 1.5f else -1.5f  // è½¦é“ä¸­å¿ƒåç§»
    
    // å‰è½¦åœ¨å‰æ–¹20må†…ä¸”æ¨ªå‘ä½ç½®æ¥è¿‘åŸè½¦é“ â†’ æœªå®Œå…¨è¶…è¶Š
    if (lead0.x < 20f && abs(lead0.y - targetY) < 1.0f) {
        return false
    }
}

// ç›®æ ‡ä¾§è½¦è¾†è·ç¦» > 50m æˆ–æ— è½¦ â†’ å·²è¶…è¶Š
if (targetLead == null || !targetLead.status || targetLead.dRel > 50f) {
    // ç­‰å¾…2ç§’ç¡®è®¤
    if (overtakeCompleteTimer == 0L) {
        overtakeCompleteTimer = System.currentTimeMillis()
    }
    return System.currentTimeMillis() - overtakeCompleteTimer >= 2000L
}
```

**è¿”å›æ•ˆç‡åˆ¤æ–­ (isReturnEfficient)**ï¼š
```kotlin
// è®¡ç®—ç›®æ ‡è½¦é“é¢„æœŸé€Ÿåº¦
val targetSpeed = if (targetLead == null || !targetLead.status) {
    currentSpeed + 10f  // æ— è½¦ï¼šå½“å‰é€Ÿåº¦ + 10 km/h
} else {
    (carState.vEgo + targetLead.vRel) * 3.6f  // æœ‰è½¦ï¼šå‰è½¦ç»å¯¹é€Ÿåº¦
}

// è®¡ç®—å½“å‰è½¦é“é¢„æœŸé€Ÿåº¦
val currentSpeedExpected = if (lead0 == null) {
    currentSpeed  // æ— å‰è½¦ï¼šå½“å‰é€Ÿåº¦
} else {
    lead0.v * 3.6f  // æœ‰å‰è½¦ï¼šå‰è½¦é€Ÿåº¦
}

// éœ€è¦è‡³å°‘8 km/hçš„é€Ÿåº¦ä¼˜åŠ¿
val speedAdvantage = targetSpeed - currentSpeedExpected
return speedAdvantage >= 8.0f
```

### 3. é˜²æŠ–æœºåˆ¶

**ç›®çš„**ï¼šé˜²æ­¢è¯¯åˆ¤å’Œé¢‘ç¹å˜é“

**å®ç°**ï¼š
```kotlin
private var debounceCounter = 0
private const val DEBOUNCE_FRAMES = 3  // è¿ç»­3å¸§

// åœ¨ update() ä¸­
if (shouldOvertake) {
    debounceCounter++
    if (debounceCounter < DEBOUNCE_FRAMES) {
        return createOvertakeStatus(data, "ç›‘æ§ä¸­", true, null)
    }
    // è¿ç»­3å¸§æ»¡è¶³æ¡ä»¶ï¼Œæ‰§è¡Œè¶…è½¦
} else {
    debounceCounter = 0  // ä¸æ»¡è¶³æ¡ä»¶æ—¶é‡ç½®
}
```

**æ—¶é—´è®¡ç®—**ï¼š
- æ•°æ®é¢‘ç‡ï¼š20Hz (50ms/å¸§)
- é˜²æŠ–å¸§æ•°ï¼š3å¸§
- é˜²æŠ–æ—¶é—´ï¼š3 Ã— 50ms = 150ms

**æ•ˆæœ**ï¼šé¿å…ç¬æ—¶æ•°æ®æ³¢åŠ¨å¯¼è‡´çš„è¯¯åˆ¤

### 4. å¿ƒè·³åŒ…æœºåˆ¶

**ç›®çš„**ï¼š
- ä¿æŒTCPè¿æ¥æ´»è·ƒ
- æ£€æµ‹è¿æ¥æ–­å¼€
- åŒºåˆ†"æ— æ•°æ®"å’Œ"è¿æ¥æ–­å¼€"

**å®ç°**ï¼š
```kotlin
// å‘é€ç«¯ (Android)
private fun startHeartbeatTask() {
    heartbeatJob = networkScope?.launch {
        while (_isRunning && tcpSocket?.isConnected == true) {
            delay(5000)  // æ¯5ç§’å‘é€ä¸€æ¬¡
            dataOutputStream?.writeInt(2)  // CMD 2 = å¿ƒè·³åŒ…
            dataOutputStream?.flush()
        }
    }
}

// æ¥æ”¶ç«¯ (Android)
val packetSize = inputStream.readInt()
if (packetSize == 0) {  // é•¿åº¦ä¸º0 = å¿ƒè·³åŒ…
    heartbeatCount++
    lastDataTime = System.currentTimeMillis()  // æ›´æ–°æœ€åæ•°æ®æ—¶é—´
    continue  // è·³è¿‡ï¼Œç»§ç»­æ¥æ”¶ä¸‹ä¸€ä¸ªæ•°æ®åŒ…
}
```

**å¿ƒè·³åŒ…æ ¼å¼**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 0x00000000 â”‚  // 4å­—èŠ‚ï¼Œå€¼ä¸º0ï¼Œè¡¨ç¤ºå¿ƒè·³åŒ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€åˆ¤æ–­**ï¼š
- **æ­£å¸¸**ï¼šæŒç»­æ”¶åˆ°æ•°æ®åŒ…æˆ–å¿ƒè·³åŒ…ï¼ŒlastDataTime < 2ç§’
- **å»¶è¿Ÿ**ï¼š2-4ç§’æœªæ”¶åˆ°æ•°æ®æˆ–å¿ƒè·³
- **æ–­å¼€**ï¼š>4ç§’æœªæ”¶åˆ°æ•°æ®æˆ–å¿ƒè·³

---

## é…ç½®å‚æ•°è¯´æ˜

### SharedPreferences é…ç½®é¡¹

| å‚æ•°å | ç±»å‹ | é»˜è®¤å€¼ | èŒƒå›´ | è¯´æ˜ |
|--------|------|--------|------|------|
| `overtake_mode` | Int | 0 | 0-2 | è¶…è½¦æ¨¡å¼ï¼š0=ç¦æ­¢ï¼Œ1=æ‹¨æ†ï¼Œ2=è‡ªåŠ¨ |
| `overtake_param_min_speed_kph` | Float | 60.0 | 40-100 | æœ€å°è¶…è½¦é€Ÿåº¦ (km/h) |
| `overtake_param_speed_diff_kph` | Float | 10.0 | 5-30 | é€Ÿåº¦å·®é˜ˆå€¼ (km/h) |

### ç¡¬ç¼–ç å¸¸é‡

**é€Ÿåº¦é˜ˆå€¼**ï¼š
```kotlin
MIN_OVERTAKE_SPEED_MS = 16.67f          // 60 km/h (å¯é…ç½®è¦†ç›–)
SPEED_DIFF_THRESHOLD = 2.78f            // 10 km/h (å¯é…ç½®è¦†ç›–)
```

**è¿œè·ç¦»è¶…è½¦å‚æ•°**ï¼š
```kotlin
EARLY_OVERTAKE_SPEED_RATIO = 0.8f       // å‰è½¦é€Ÿåº¦ â‰¤ 80% æœ¬è½¦é€Ÿåº¦
EARLY_OVERTAKE_MIN_LEAD_SPEED_KPH = 50.0f   // å‰è½¦é€Ÿåº¦ â‰¥ 50 km/h
EARLY_OVERTAKE_MIN_SPEED_DIFF_KPH = 20.0f   // é€Ÿåº¦å·® â‰¥ 20 km/h
EARLY_OVERTAKE_MIN_DISTANCE = 30.0f     // æœ€å°è·ç¦» 30m
EARLY_OVERTAKE_MAX_DISTANCE = 100.0f    // æœ€å¤§è·ç¦» 100m
```

**è·ç¦»é˜ˆå€¼**ï¼š
```kotlin
MAX_LEAD_DISTANCE = 80.0f               // æœ€å¤§å‰è½¦è·ç¦» (m)
MIN_LEAD_PROB = 0.5f                    // æœ€å°å‰è½¦ç½®ä¿¡åº¦
MIN_LEAD_SPEED_KPH = 50.0f              // æœ€å°å‰è½¦é€Ÿåº¦ (km/h)
```

**è½¦é“çº¿é˜ˆå€¼**ï¼š
```kotlin
MIN_LANE_PROB = 0.7f                    // æœ€å°è½¦é“çº¿ç½®ä¿¡åº¦ (70%)ï¼ŒUIæ˜¾ç¤ºé˜ˆå€¼
MIN_LANE_WIDTH = 3.0f                   // æœ€å°è½¦é“å®½åº¦ (m)ï¼ŒUIæ˜¾ç¤ºé˜ˆå€¼
```

**æ›²ç‡ä¸è½¬å‘é˜ˆå€¼**ï¼š
```kotlin
MAX_CURVATURE = 0.02f                   // æœ€å¤§æ›²ç‡ (rad/s)
MAX_STEERING_ANGLE = 15.0f              // æœ€å¤§æ–¹å‘ç›˜è§’åº¦ (åº¦)
```

**æ—¶é—´å‚æ•°**ï¼š
```kotlin
DEBOUNCE_FRAMES = 3                     // é˜²æŠ–å¸§æ•° (3å¸§ = 150ms)
LANE_CHANGE_DELAY_MS = 2500L            // å˜é“å»¶è¿Ÿ (2.5ç§’ï¼Œæç¤ºéŸ³åæ‰§è¡Œ)
OVERTAKE_ACTION_COOLDOWN_MS = 20000L    // è¶…è½¦æ“ä½œå†·å´ (20ç§’)
MAX_LANE_MEMORY_TIME_MS = 30000L        // è½¦é“è®°å¿†è¶…æ—¶ (30ç§’)
RETURN_MIN_SPEED_ADVANTAGE_KPH = 8.0f   // è¿”å›é€Ÿåº¦ä¼˜åŠ¿ (8 km/h)
OVERTAKE_COMPLETE_DURATION_MS = 2000L   // è¶…è¶Šå®Œæˆç¡®è®¤æ—¶é—´ (2ç§’)
```

**ç½‘ç»œå‚æ•°**ï¼š
```kotlin
TCP_PORT = 7711                         // TCPç«¯å£
DATA_TIMEOUT_MS = 4000L                 // æ•°æ®è¶…æ—¶ (4ç§’)
CLEANUP_INTERVAL_MS = 1000L             // æ¸…ç†é—´éš” (1ç§’)
RECONNECT_DELAY_MS = 2000L              // é‡è¿å»¶è¿Ÿ (2ç§’)
SOCKET_TIMEOUT_MS = 30000               // Socketè¶…æ—¶ (30ç§’)
IP_CHECK_INTERVAL_MS = 3000L            // IPæ£€æŸ¥é—´éš” (3ç§’)
```

---

## çŠ¶æ€æœºåˆ†æ

### è¶…è½¦ç»“æœçŠ¶æ€æœº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    NONE     â”‚ â† åˆå§‹çŠ¶æ€
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ å‘é€å˜é“å‘½ä»¤
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING   â”‚ â† ç­‰å¾…å˜é“çŠ¶æ€åé¦ˆ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â–º laneChangeState == 1 (å˜é“ä¸­) â†’ ä¿æŒPENDING
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â–º laneChangeState == 2 (å®Œæˆ) â†’ SUCCESS
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â–º laneChangeState == 3 (å–æ¶ˆ) â†’ FAILED
       â”‚
       â””â”€â”€â”€â”€â”€â”€â–º è¶…æ—¶3ç§’æœªå®Œæˆ â†’ FAILED
       
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SUCCESS   â”‚ â† å˜é“æˆåŠŸ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FAILED    â”‚ â† å˜é“å¤±è´¥/å–æ¶ˆ/è¶…æ—¶
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONDITION_NOT_MET   â”‚ â† æ¡ä»¶ä¸æ»¡è¶³
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€è½¬æ¢ä»£ç **ï¼š
```kotlin
// å‘é€å˜é“å‘½ä»¤æ—¶
lastOvertakeResult = OvertakeResult.PENDING
pendingOvertakeStartTime = System.currentTimeMillis()

// å˜é“çŠ¶æ€æ›´æ–°æ—¶
fun updateOvertakeResultFromLaneChangeState(laneChangeState: Int) {
    when (laneChangeState) {
        1 -> {  // å˜é“ä¸­
            // ä¿æŒPENDINGçŠ¶æ€
        }
        2 -> {  // å˜é“å®Œæˆ
            lastOvertakeResult = OvertakeResult.SUCCESS
        }
        3 -> {  // å˜é“å–æ¶ˆ
            lastOvertakeResult = OvertakeResult.FAILED
        }
    }
}

// è¶…æ—¶æ£€æŸ¥
if (laneChangeState == 0 && lastOvertakeResult == OvertakeResult.PENDING) {
    val now = System.currentTimeMillis()
    if (now - pendingOvertakeStartTime > PENDING_TIMEOUT_MS) {
        lastOvertakeResult = OvertakeResult.FAILED
    } else {
        lastOvertakeResult = OvertakeResult.SUCCESS
    }
}
```

### è¿æ¥çŠ¶æ€æœº (UIå±•ç¤º)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ–­å¼€       â”‚ â† åˆå§‹çŠ¶æ€ / >4ç§’æ— æ•°æ®
â”‚   (çº¢è‰² â—)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ TCPè¿æ¥æˆåŠŸ
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     offroad + æ— æ•°æ®
â”‚   å¾…æœº       â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   (ç°è‰² â—‹)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ onroad + æœ‰æ•°æ®
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     enabled=true, active=false
â”‚   å‡†å¤‡       â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   (è“è‰² â—”)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ enabled=true, active=true
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ­£å¸¸       â”‚ â† ACCå·¥ä½œä¸­
â”‚   (ç»¿è‰² â—)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2-3ç§’æ— æ•°æ®
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å»¶è¿Ÿ       â”‚
â”‚   (æ©™è‰² â—)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3-4ç§’æ— æ•°æ®
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å¼‚å¸¸       â”‚
â”‚   (æ·±çº¢ âš )   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ >4ç§’æ— æ•°æ®
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ–­å¼€       â”‚
â”‚   (çº¢è‰² â—)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**çŠ¶æ€åˆ¤æ–­é€»è¾‘**ï¼š
```kotlin
// VehicleLaneVisualization.kt
val isOnroad = currentData != null && 
              currentData.carState != null && 
              currentData.modelV2 != null

val (statusText, statusColor, statusIcon) = when {
    isDisconnected -> Triple("æ–­å¼€", Color(0xFFEF4444), "â—")  // >4ç§’
    isDataStale && dataAge > 3000 -> Triple("å¼‚å¸¸", Color(0xFFDC2626), "âš ")  // 3-4ç§’
    isDataStale -> Triple("å»¶è¿Ÿ", Color(0xFFF59E0B), "â—")  // 2-3ç§’
    isSystemActive -> Triple("æ­£å¸¸", Color(0xFF10B981), "â—")  // ACCå·¥ä½œ
    isOnroad && isSystemEnabled -> Triple("å‡†å¤‡", Color(0xFF3B82F6), "â—”")  // onroadæœªæ¿€æ´»
    isOnroad -> Triple("å‡†å¤‡", Color(0xFF60A5FA), "â—‘")  // onroadæœªå¯ç”¨
    else -> Triple("å¾…æœº", Color(0xFF64748B), "â—‹")  // offroad
}
```

---

## å®‰å…¨æœºåˆ¶

### 1. å¤šå±‚å®‰å…¨æ£€æŸ¥

**å±‚çº§1ï¼šå‰ç½®æ¡ä»¶æ£€æŸ¥ (checkPrerequisites)**
- é€Ÿåº¦æ£€æŸ¥ï¼šé¿å…ä½é€Ÿè¶…è½¦
- å‰è½¦æ£€æŸ¥ï¼šç¡®ä¿å‰è½¦å­˜åœ¨ä¸”å¯é 
- é“è·¯æ£€æŸ¥ï¼šç›´é“æ‰èƒ½è¶…è½¦
- å˜é“æ£€æŸ¥ï¼šä¸åœ¨å˜é“ä¸­
- æ–¹å‘ç›˜æ£€æŸ¥ï¼šè½¦è¾†ç¨³å®š

**å±‚çº§2ï¼šè¶…è½¦åˆ¤æ–­ (shouldOvertake)**
- é€Ÿåº¦å·®æ£€æŸ¥ï¼šç¡®ä¿è¶…è½¦å¿…è¦æ€§
- è¿œè·ç¦»æ£€æŸ¥ï¼šæå‰é¢„åˆ¤

**å±‚çº§3ï¼šå¯è¡Œæ€§æ£€æŸ¥ (checkOvertakeConditions)**
- è½¦é“çº¿æ£€æŸ¥ï¼šç¡®ä¿è½¦é“æ¸…æ™°
- è½¦é“å®½åº¦æ£€æŸ¥ï¼šç¡®ä¿ç©ºé—´å……è¶³
- ç›²åŒºæ£€æŸ¥ï¼šç¡®ä¿ä¾§æ–¹å®‰å…¨

### 2. é˜²æŠ–æœºåˆ¶

**ä½œç”¨**ï¼šé˜²æ­¢ç¬æ—¶æ•°æ®æ³¢åŠ¨å¯¼è‡´çš„è¯¯åˆ¤

**å®ç°**ï¼šè¿ç»­3å¸§ (150ms) æ»¡è¶³æ¡ä»¶æ‰æ‰§è¡Œ

**æ•ˆæœ**ï¼š
- é¿å…è¯¯åˆ¤
- å‡å°‘é¢‘ç¹å˜é“
- æé«˜ç¨³å®šæ€§

### 3. è¶…æ—¶å’Œå¤±è´¥å¤„ç†

**å˜é“è¶…æ—¶**ï¼š3ç§’æœªå®Œæˆ â†’ æ ‡è®°å¤±è´¥

**è¿æ¥è¶…æ—¶**ï¼š4ç§’æ— æ•°æ® â†’ æ¸…ç†æ•°æ®

**è‡ªåŠ¨é‡è¿**ï¼šTCPè¿æ¥æ–­å¼€ â†’ 2ç§’åé‡è¿

### 4. è¿”å›åŸè½¦é“å®‰å…¨æ£€æŸ¥

**å®Œå…¨è¶…è¶Šç¡®è®¤**ï¼š
- åŸè½¦é“å‰è½¦ä¸åœ¨å‰æ–¹20må†…
- ç­‰å¾…2ç§’ç¡®è®¤

**è¿”å›å®‰å…¨æ£€æŸ¥**ï¼š
- ç›²åŒºæ— è½¦
- ç›®æ ‡ä¾§è½¦è¾†è·ç¦»å®‰å…¨
- ç›®æ ‡ä¾§è½¦è¾†é€Ÿåº¦å®‰å…¨

**è¶…æ—¶ä¿æŠ¤**ï¼š30ç§’åè‡ªåŠ¨é‡ç½®è½¦é“è®°å¿†

### 5. æ•°æ®éªŒè¯

**JSONè§£æ**ï¼štry-catchåŒ…è£¹ï¼Œè§£æå¤±è´¥è¿”å›null

**æ•°æ®åŒ…éªŒè¯**ï¼š
- å¤§å°æ£€æŸ¥ï¼š8 - 4096 bytes
- è¾¹ç•Œæ£€æŸ¥ï¼šè¿ç»­3æ¬¡å¤±è´¥é‡è¿

**IPåœ°å€è¿‡æ»¤**ï¼šè¿‡æ»¤æœ¬åœ°å›ç¯åœ°å€ (127.0.0.1)

### 6. çŠ¶æ€åŒæ­¥

**å˜é“çŠ¶æ€ç›‘æ§**ï¼š
- å®æ—¶ç›‘æ§ laneChangeState
- åŠæ—¶æ›´æ–°è¶…è½¦ç»“æœ

**æ•°æ®æ—¶æ•ˆæ€§**ï¼š
- è®°å½•æ¥æ”¶æ—¶é—´ (receiveTime)
- è®¡ç®—æ•°æ®å¹´é¾„ (dataAge)
- UIå®æ—¶æ˜¾ç¤ºå»¶è¿Ÿ

---

## UIå±•ç¤ºåˆ†æ

### æ¡ä»¶æ£€æŸ¥è¡¨æ ¼ (11é¡¹ç»†åˆ†ï¼Œ4ä¸ªæ ¸å¿ƒç»„)

**UI åˆ†ç»„æ˜¾ç¤ºé€»è¾‘**ï¼š
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          â‘  æœ¬è½¦çŠ¶æ€ (åˆå¹¶3é¡¹)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- é€Ÿåº¦æ»¡è¶³ (â‰¥ 60 km/h)
- è½¬å‘è§’åº¦ (â‰¤ 15Â°)
- å˜é“çŠ¶æ€ (æœªå˜é“)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          â‘¡ å‰è½¦çŠ¶æ€ (åˆå¹¶3é¡¹)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- è·ç¦»æ»¡è¶³ (< 80m)
- é€Ÿåº¦æ»¡è¶³ (â‰¥ 50 km/h)
- é€Ÿåº¦å·®æ»¡è¶³ (â‰¥ 10 km/h)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          â‘¢ é“è·¯è½¦é“ (åˆå¹¶3é¡¹)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- é“è·¯æ›²ç‡ (< 0.02 rad/s)
- è½¦é“çº¿ç½®ä¿¡åº¦ (â‰¥ 70%)
- è½¦é“å®½åº¦ (â‰¥ 3.0m)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
          â‘£ ç›²åŒºæ£€æµ‹ (2é¡¹)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- å·¦/å³ä¾§æ–¹è½¦è¾†æ£€æµ‹
- å·¦/å³ç›²åŒºæ£€æµ‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

**è§†è§‰ä¼˜åŒ–**ï¼š
- æ–‘é©¬çº¹èƒŒæ™¯ (å¥‡å¶è¡Œ)
- åˆ†ç»„åˆ†éš”çº¿
- å®é™…å€¼æ ¹æ®çŠ¶æ€ç€è‰² (é€šè¿‡=é’è‰², å¤±è´¥=æµ…çº¢è‰²)
- çŠ¶æ€å›¾æ ‡é†’ç›® (12sp)

### çŠ¶æ€å¡ç‰‡

**è¶…è½¦æç¤ºä¿¡æ¯**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” å˜é“è¶…è½¦è¯·æ‹¨æ†ç¡®è®¤                        â”‚
â”‚ ç³»ç»Ÿå·²æ£€æµ‹åˆ°è¶…è½¦æ¡ä»¶ï¼Œè¯·æ‹¨åŠ¨è½¬å‘æ†ç¡®è®¤        â”‚
â”‚ å†·å´: 2.5s                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¿æ¥çŠ¶æ€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—” å‡†å¤‡       â”‚ â† è“è‰²ï¼Œè½¦è¾†onroadä½†ACCæœªå¯åŠ¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— æ­£å¸¸       â”‚ â† ç»¿è‰²ï¼ŒACCå·¥ä½œä¸­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â— å»¶è¿Ÿ 2.5s  â”‚ â† æ©™è‰²ï¼Œ2-3ç§’æœªæ”¶åˆ°æ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ€»ç»“

### ç³»ç»Ÿä¼˜åŠ¿

1. **å®‰å…¨æ€§é«˜**ï¼šå¤šå±‚å®‰å…¨æ£€æŸ¥ï¼Œé˜²æŠ–æœºåˆ¶ï¼Œè¶…æ—¶ä¿æŠ¤
2. **å®æ—¶æ€§å¥½**ï¼š20Hzæ•°æ®é¢‘ç‡ï¼ŒTCPä½å»¶è¿Ÿä¼ è¾“ï¼Œå¿ƒè·³åŒ…æœºåˆ¶
3. **æ™ºèƒ½åŒ–**ï¼šè¿œè·ç¦»è¶…è½¦ï¼Œè‡ªåŠ¨è¿”å›åŸè½¦é“ï¼Œé€Ÿåº¦ä¼˜åŠ¿åˆ¤æ–­
4. **å¯é…ç½®**ï¼šæ”¯æŒå‚æ•°è°ƒæ•´ï¼Œé€‚åº”ä¸åŒé©¾é©¶é£æ ¼
5. **å¯è§†åŒ–**ï¼š11é¡¹ç»†åˆ†æ¡ä»¶å®æ—¶æ˜¾ç¤ºï¼ŒçŠ¶æ€æ¸…æ™°ç›´è§‚

### æ”¹è¿›ç©ºé—´

1. **æœºå™¨å­¦ä¹ **ï¼š
   - å­¦ä¹ ç”¨æˆ·è¶…è½¦ä¹ æƒ¯
   - æ ¹æ®é“è·¯ç±»å‹ä¼˜åŒ–å‚æ•°
   - é¢„æµ‹å‰è½¦è¡Œä¸º

2. **å¤šè½¦è·Ÿè¸ª**ï¼š
   - è·Ÿè¸ªæ›´è¿œè·ç¦»å‰è½¦
   - é¢„åˆ¤å‰è½¦å˜é“æ„å›¾
   - ä¼˜åŒ–è¶…è½¦æ—¶æœº

3. **åœ°å›¾èåˆ**ï¼š
   - ç»“åˆé«˜ç²¾åœ°å›¾
   - è¯†åˆ«è¶…è½¦ç¦æ­¢åŒºåŸŸ
   - ä¼˜åŒ–è¿”å›åŸè½¦é“ä½ç½®

4. **V2Xé€šä¿¡**ï¼š
   - è·å–å‰è½¦é€Ÿåº¦ä¿¡æ¯
   - æ¥æ”¶é“è·¯çŠ¶å†µä¿¡æ¯
   - æé«˜å†³ç­–å‡†ç¡®æ€§

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.1
**æœ€åæ›´æ–°**ï¼š2025å¹´12æœˆ21æ—¥
**ä½œè€…**ï¼šAI Coding Assistant

